{"version":3,"names":[],"mappings":"","sources":["bc-monitor-background.js"],"sourcesContent":["var App=App||{};App.main={callAPI:function(t,e,n){var a=new XMLHttpRequest,s=\"\";return a.onreadystatechange=function(){if(200===this.status&&4===this.readyState&&(s=this.responseText),400===this.status||404===this.status||500===this.status||503===this.status||520===this.status)return s=\"Ops! Os Macacos do Laboratório ficaram loucos =O !!\",document.querySelector(\".bc-main-wrapper\").innerHTML=s,!1},a.open(t,e,n),a.send(),s},callBC:function(){var t=App.main,e=t.callAPI(\"GET\",\"https://api.coindesk.com/v1/bpi/currentprice.json?nocache=true\",!1),n=t.callAPI(\"GET\",\"https://api.blinktrade.com/api/v1/BRL/ticker?crypto_currency=BTC&nocache=true\",!1),a=JSON.parse(e),s=JSON.parse(n),o=a.bpi.USD.rate_float,r=s.buy,i=s.sell;chrome.storage.sync.get(function(t){parseInt(r)<=parseInt(t.btc_value)&&(!t.show_notification||parseInt(r)<parseInt(t.current_value))&&(chrome.notifications.create(\"bcm\",{type:\"basic\",iconUrl:chrome.extension.getURL(\"dist/icons/btc-icon-48.svg\"),title:\"BC Monitor - O Preço baixou!!\",message:\"Bora comprar mais Bitocoins? \\n Valor Atual: R$ \"+r.toFixed(2)}),chrome.notifications.clear(\"bcm\"),chrome.storage.sync.set({show_notification:!0,current_value:r.toFixed(2)},function(){}))});var c=[];return c.valBTC=o.toFixed(2),c.valBR=r.toFixed(2),c.val_btc_br=i.toFixed(2),c},sendToUser:function(t){var e=App.main.callBC(),n={valBTC:e.valBTC,valBR:e.valBR,val_btc_br:e.val_btc_br};\"refresh\"===t&&chrome.runtime.sendMessage(n,function(t){}),chrome.runtime.onMessage.addListener(function(t,e,a){\"get\"===t.message&&a(n)})},init:function(){var t=App.main;chrome.storage.sync.set({show_notification:!1},function(){}),t.callBC(),t.sendToUser(),setInterval(function(){t.sendToUser(\"refresh\")},3e4)}},document.addEventListener(\"DOMContentLoaded\",App.main.init);"],"file":"bc-monitor-background.js"}